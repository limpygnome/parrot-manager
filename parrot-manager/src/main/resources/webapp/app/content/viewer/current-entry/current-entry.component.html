<div class="header">
    <div class="button">
        <button class="btn btn-default" (click)="navigateToParent()">
            <span class="icon icon-arrow-up2"></span>
        </button>
    </div>
    <div class="title">
        <input type="text" class="title-input"
               (change)="updateName($event)"
               (click)="preUpdateName($event)"
               (blur)="postUpdateName($event)"
               value="{{ currentNode.getName() != null ? currentNode.getName() : '(unnamed)' }}"
        />
    </div>
</div>

<p title="{{ currentNode.getFormattedLastModified() }}">
    Last modified: {{ currentNode.getFormattedLastModified() }}
</p>

<!-- Value Options -->
<div class="form-group options">
    <button class="btn btn-primary" (click)="saveValue.emit()">
        Save Value
    </button>
    <button class="btn btn-danger" *ngIf="!currentNode.isRoot()" (click)="deleteCurrentEntry(currentNode.getId())">
        Delete
    </button>
    <button class="btn btn-default" (click)="hideValue()">
        Hide Value
    </button>
    <copy-clipboard [encryptedValue]="currentNode.getValue()"></copy-clipboard>
    <button class="btn btn-default" data-toggle="collapse" data-target="#generateRandomContainer">
        Generate Random
    </button>
</div>

<!-- Generate Random Value Options -->
<generate-random id="generateRandomContainer" class="collapse" [currentNode]="currentNode" (refreshValue)="refreshValue()"></generate-random>

<form [formGroup]="updateEntryForm" #form="ngForm">
    <!-- Current value -->
    <div class="form-group">
                    <textarea id="currentValue"
                              class="form-control"
                              rows="1"
                              placeholder="Click to reveal value"
                              formControlName="currentValue"
                              (click)="preUpdateValue($event)"
                              (keydown)="updateValue($event)"
                    >********</textarea>
    </div>

</form>
